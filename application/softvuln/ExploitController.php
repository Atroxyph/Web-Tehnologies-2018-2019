<?php

	require_once("NotAnExploitException.php");
	require_once("NotAnExploitViewException.php");
	require_once("NotAnExploitListException.php");
	require_once("Exploit.php");
	require_once("ExploitView.php");

	class ExploitController {

		private $model;
		private $view;

		public function __construct($model, $view) {

			if (!ExploitController::isObjectAnExploitList($model))
				throw new NotAnExploitListException("ErrorList");

			if (!$view instanceof ExploitView)
				throw new NotAnExploitViewException();

			$this->model = $model;
			$this->view = $view;

		}

		public function updateModel($newModel) {

			if (!ExploitController::isObjectAnExploitList($model))
				throw new NotAnExploitListException();

			$this->model = $newModel;

		}

		public function updateView() {

			foreach ($this->model as $modelElem) {
				$this->view->printExploitInfo($modelElem);	
			}

		}

		private static function isObjectAnExploitList($list) {

			if (!is_array($list))
				return false;

			foreach ($list as $modelElem) {
				if (!$modelElem instanceof Exploit)
					return false;
			}

			return true;

		}

	}


?>